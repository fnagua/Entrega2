<ui:composition 
    template="/templates/base.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
    xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
    >
    <ui:define name="title">Editar Perfil</ui:define>
    <ui:define name="content">
        <c:choose>
            <c:when test="#{not empty controlAutorizacion.usuario}">
                <h:form>
                    <div class="container-fluid">
                        <h1 class="mt-4">
                            Editar el perfil de
                            <h:outputText value="#{controlAutorizacion.usuario.nombre}"/>
                            <i class="fas fa-pencil-alt"></i>
                        </h1>
                        <div class="card mb-4">
                            <div class="card-header">
                                <a><i class="fas fa-id-card-alt mr-2"></i></a>
                                Información Personal
                            </div>
                            <div class="card-body">
                                <div class="form-group">
                                    <b>Nombre<br/></b>
                                    <h:inputText class="form-control py-4 mt-1 mb-3" a:placeholder="#{controlAutorizacion.usuario.nombre}" value="#{bd.nombre}"/>
                                    <b>Apellidos<br/></b>
                                    <h:inputText class="form-control py-4 mt-1 mb-3" a:placeholder="#{controlAutorizacion.usuario.apellidos}" value="#{bd.apellidos}"/>
                                    <b>Alias<br/></b>
                                    <h:inputText class="form-control py-4 mt-1 mb-3" a:placeholder="#{controlAutorizacion.usuario.usuario}" value="#{bd.usuarioo}"/>
                                </div>
                            </div>
                        </div>
                        <div class="card mb-4">
                            <div class="card-header">
                                <a><i class="fas fa-phone mr-2"></i></a>
                                Información de contacto
                            </div>
                            <div class="card-body">
                                <div class="form-group mb-2">
                                    <b>Email<br/></b>
                                    <h:inputText class="form-control py-4 mt-1 mb-3" a:placeholder="#{controlAutorizacion.usuario.email}" value="#{bd.email}"/>
                                    <c:if test="#{controlAutorizacion.usuario.rol == 'AFILIADO'}">    
                                        <b>Nº Teléfono<br/></b>
                                        <h:inputText class="form-control py-4 mt-1 mb-3" a:placeholder="#{controlAutorizacion.usuario.email}##FALTA Nº TLF##"/>
                                    </c:if>
                                </div>
                            </div>
                        </div>
                        <div class="form-group d-flex align-items-center justify-content-between mt-4">
                            <a class="btn btn-primary" href="/Entrega2/faces/perfil.xhtml">Cancelar</a>
                            <div class="form-group mt-4">
                                <h:commandButton class="btn btn-primary btn-block " value="Aplicar cambios" action="#{bd.modificarUsuario()}" />
                            </div>
                        </div>
                    </div>
                </h:form>
            </c:when>
            <c:otherwise>
                <meta http-equiv="refresh" content="0; url=/Entrega2/faces/error.xhtml?faces-redirect=true"/>
            </c:otherwise>
        </c:choose>
    </ui:define>
</ui:composition>
